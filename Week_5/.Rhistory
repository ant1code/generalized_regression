library(tram)
library(tram)
dat<-read.table("lehmann_data.csv")
lehmann_data$sex<-factor(lehmann_data$sex)
lehmann_data <- dat
lehmann_data$sex<-factor(lehmann_data$sex)
Lehmann(bmi ~ sex , data = lehmann_data)
View(lehmann_data)
dat<-read.table("lehmann_data.csv", sep=",")
View(dat)
lehmann_data <- dat
lehmann_data$sex<-factor(lehmann_data$sex)
dat<-read.table("lehmann_data.csv", sep=",", head = TRUE)
lehmann_data <- dat
lehmann_data$sex<-factor(lehmann_data$sex)
Lehmann(bmi ~ sex , data = lehmann_data)
lehmann_data<-as.data.frame(lehmann_data)
res<-Lehmann(bmi ~ sex, data = lehmann_data)
res2<-summary(res)
new<-data.frame(sex= c(rep("male",50), rep("female",50)))
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new)
plot(pre$approxy, col = new$sex)
library(ggplot2)
dataa<-data.frame(new , pre$approxy)
ggplot(data = dataa)+
geom_density(aes(pre.approxy, group=  sex, fill = sex), alpha = 0.8)+
theme_classic()+
ggtitle(label = "Densities for simulated data")+
xlab(label = "bmi")
library(carData)
head(Mroz)
mroz.glm.mod<-glm(lfp ~. , family=binomial(link = "logit"), data= Mroz)
su<-summary(mroz.glm.mod)
exp(su$coefficients[4,1])
confint(mroz.glm.mod)
library(tram)
Lehmann_data
library(tram)
library(tram)
dat<-read.table("lehmann_data.csv", sep=",", head = TRUE)
View(lehmann_data)
lehmann_data <- dat
lehmann_data$sex<-factor(lehmann_data$sex)
Lehmann(bmi ~ sex , data = lehmann_data)
lehmann_data<-as.data.frame(lehmann_data)
res<-Lehmann(bmi ~ sex, data = lehmann_data)
View(new)
new<-data.frame(sex= c(rep("male",50), rep("female",50)))
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new)
plot(pre$approxy, col = new$sex)
new<-data.frame(sex= c(rep("male",50), rep("female",50)))
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new)
plot(pre$approxy, col = new$sex)
pre<-simulate(as.mlt(res2), newdata = new)
pre<-simulate(as.mlt(res), newdata = new)
res<-Lehmann(bmi ~ sex, data = lehmann_data)
res2<-summary(res)
res2
new<-data.frame(sex= c(rep("male",50), rep("female",50)))
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new)
new<-data.frame(sex= c(rep("male",3))))
new<-data.frame(sex= c(rep("male",3)))
View(new)
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new)
plot(pre$approxy, col = new$sex)
pre<-simulate(as.mlt(res), newdata = new)
new$sex<-factor(new$sex)
View(new)
pre<-simulate(as.mlt(res), newdata = new$sex)
pre<-simulate(as.mlt(res), newdata = new$sex)
res2
res
View(lehmann_data)
new<-data.frame(sex= c(rep("0",3)))
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new$sex)
new<-data.frame(sex= c(rep(0,3)))
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new$sex)
plot(pre$approxy, col = new$sex)
new$sex <- factor(new$sex)
new$sex<-factor(new$sex)
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new$sex)
new<-data.frame(sex= c(rep(0,3)))
pre<-simulate(as.mlt(res), newdata = new$sex)
res
pre<-simulate(as.mlt(res), newdata = new)
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new)
new<-data.frame(sex= c(rep(0,3)))
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new)
?simulate
View(new)
pre<-simulate(as.mlt(res), new)
pre<-simulate(as.mlt(res), newdata = new)
plot(pre$approxy, col = new$sex)
new<-factor(sex)
pre<-simulate(as.mlt(res), newdata = new)
new$sex<-factor(new$sex)
new$bmi<-rep(NA,3)
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new)
new
View(new)
pre<-simulate(as.mlt(res), newdata = new)
new<-data.frame(sex= c(rep(0,3)))
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new)
View(res2)
res2
new<-data.frame(sex= c(rep(0,3)))
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new)
View(new)
new<-data.frame(sex1= c(rep(0,3)))
new$sex1<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new)
new<-data.frame(sex1= c(rep(0,3)))
new$sex1<-factor(new$sex1)
pre<-simulate(as.mlt(res), newdata = new)
new<-data.frame(sex1= c(rep(0,3)))
pre<-simulate(as.mlt(res), newdata = new)
pre<-simulate(as.mlt(res), newdata = new$sex1)
pre<-simulate(as.mlt(res), newdata = new)
View(lehmann_data)
new<-data.frame(bmi= c(rep(NA,3)))
new$sex1<-factor(new$sex1)
new<-data.frame(sex1= c(rep(0,3)))
new$sex1<-factor(new$sex1)
pre<-simulate(as.mlt(res), newdata = new)
new<-data.frame(sex= c(rep("male",500), rep("female",500)))
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new)
library(carData)
mroz <- Mroz
mroz$lfp <- as.factor(mroz$lfp)
mroz.gml.mod <- glm(lfp ~ k5 + k618 + age + wc + hc + lwg + inc, mroz, family = binomial(link='logit'))
summary(mroz.gml.mod)
library(tram)
library(readr)
lehmann_data <- read_csv("~/OneDrive - uzh.ch/UZH/HS20/GR_HUB/generalized_regression/lehmann_data.csv")
lehmann_data$sex<-factor(lehmann_data$sex)
x <- Lehmann(bmi ~ sex, data = as.data.frame(lehmann_data))
summary(lehmann_data)
female <- c(lehmann_data$bmi)
female[2]
new<-data.frame(sex= c(rep("male",5), rep("female",5)))
new$sex <- factor(new$sex)
abc <- simulate(as.mlt(x), newdata = new)
lehmann_data <- read_csv("~/OneDrive - uzh.ch/UZH/HS20/GR_HUB/generalized_regression/Week_5/lehmann_data.csv")
lehmann_data$sex<-factor(lehmann_data$sex)
x <- Lehmann(bmi ~ sex, data = as.data.frame(lehmann_data))
summary(lehmann_data)
female <- c(lehmann_data$bmi)
female[2]
new<-data.frame(sex= c(rep("male",5), rep("female",5)))
new$sex <- factor(new$sex)
abc <- simulate(as.mlt(x), newdata = new)
new<-data.frame(sex= c(rep(0,5), rep(1,5)))
new$sex <- factor(new$sex)
abc <- simulate(as.mlt(x), newdata = new)
new<-data.frame(sex= c(rep(0,5), rep(1,5)))
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new)
plot(pre$approxy, col = new$sex)
new<-data.frame(sex= c(rep(1,5)))
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new)
new<-data.frame(sex= c(rep(0,0), rep(1,3)))
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new)
new<-data.frame(sex= c(rep(0,1), rep(1,3)))
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new)
new<-data.frame(sex= c(rep(0,3), rep(1,1)))
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new)
plot(pre$approxy, col = new$sex)
plot(pre, col = new$sex)
plot(pre, col = new$sex)
plot(pre, new$sex)
pre<-simulate(as.mlt(res), newdata = new)
pre<-simulate(as.mlt(res), newdata = new)
pre<-simulate(as.mlt(res), newdata = new, nsim = 1000)
View(pre)
View(pre)
predict(res, type = "distribution", newdata = new))
predict(res, type = "distribution", newdata = new)
predict(res, type = "distribution", newdata = new[,1:3])
View(new)
predict(res, type = "distribution", newdata = new)
plot(predict(res, type = "distribution", newdata = new))
plot(predict(res, type = "distribution", newdata = new))
predict(res, type = "distribution", newdata = new)
new<-data.frame(sex= c(rep(0,3), rep(1,1)))
new$sex<-factor(new$sex)
pre<-simulate(as.mlt(res), newdata = new, nsim = 1000)
predict(res, type = "distribution", newdata = new)
View(pre)
head(pre)
pre[[]][2]
pre[2]
pre[[1:1000]][2]
pre[1:1000][2]
pre[1][2]
pre[2]
pre[2:1]
pre[2(1)]
pre[[2],2]
pre[,2]
pre[2,]
pre[[2]
f
pre[[2]]
pre[2]
pre[[2]1]
pre[[2],]
pre[1[2]]
pre[[2]]
pre[[2]][2]
pre[2][2]
pre[2][2]
pre[2]
pre[2][[2]]
pre[[2]]
pre[[1:1000]]
pre[[1:1000]]
newdf <- pre[[1:1000]]
newdf <- pre[[1000]]
View(newdf)
newdf <- pre$approxy[[1000]]
newdf <- pre[[1000]]
View(newdf)
View(pre)
newdf <- pre$approxy[1000]
pre[2]$approxy
pre$approxy
pre[1]
pre$approx
pre[[1]]$approx
pre[[1:2]]$approx
pre[[1]]$approxy
newdf <- pre[[1]]$approxy
for (i in (1:1000)){
newdf[i] <- pre[[i]]$approxy
}
newdf[i,] <- pre[[i]]$approxy
for (i in (1:1000)){
newdf[i,] <- pre[[i]]$approxy
}
pre
pre[[5]]$approxy
pre[[5]]$approxy[,1:3]
pre[[5]]$approxy[1:3]
max(pre[[5]]$approxy[1:3])
for (i in (1:1000)){
newdf[i,] <- max(pre[[i]]$approxy[1:3])
}
newdf<-numeric()
for (i in (1:1000)){
newdf[i,] <- max(pre[[i]]$approxy[1:3])
}
for (i in (1:1000)){
newdf[i,] <- max(pre[[i]]$exact[1:3])
}
newdf[i] <- max(pre[[i]]$exact[1:3])
for (i in (1:1000)){
newdf[i] <- max(pre[[i]]$exact[1:3])
}
for (i in (1:1000)){
newdf[i] <- max(pre[[i]]$exact[1:3])
}
?any
any(newdf == "NA")
any(newdf == NA)
any(newdf = "NA")
head(newdf)
dataa<-data.frame(new , newdf)
dataa
ggplot(data = dataa)+
geom_density(aes(pre.approxy, group=  sex, fill = sex), alpha = 0.8)+
theme_classic()+
ggtitle(label = "Densities for simulated data")+
xlab(label = "bmi")
library(ggplot2)
dataa<-data.frame(new , newdf)
ggplot(data = dataa)+
geom_density(aes(pre.approxy, group=  sex, fill = sex), alpha = 0.8)+
theme_classic()+
ggtitle(label = "Densities for simulated data")+
xlab(label = "bmi")
dataa
ecdf(newdf)
plot(ecdf(newdf))
res2
res<-Lehmann(bmi ~ sex, data = lehmann_data)
res
predict(res, type = "distribution", newdata = new)
other <- predict(res, type = "distribution", newdata = new)
other <- other[,4]
other
plot(ecdf(other))
### EMPIRICAL CDF OF SEX 0 HERE SIMULATED
plot(ecdf(newdf))
plot(ecdf(other), add = TRUE)
plot(ecdf(newdf))
plot(ecdf(other), add = TRUE)
plot(ecdf(other), add = TRUE)
)
plot(ecdf(newdf))
plot(ecdf(other), add = TRUE)
points(ecdf(other), add = TRUE)
plot(ecdf(newdf))
points(ecdf(other), add = TRUE)
plot(ecdf(other))
plot(ecdf(newdf))
#1 CATEGORY
new1<-data.frame(sex= c(rep(1,3), rep(0,1)))
new1$sex<-factor(new1$sex)
pre1<-simulate(as.mlt(res), newdata = new1, nsim = 1000)
predict(res, type = "distribution", newdata = new1)
head(pre1)
newdf1<-numeric()
for (i in (1:1000)){
newdf1[i] <- max(pre1[[i]]$exact[1:3])
}
### EMPIRICAL CDF OF SEX 0 HERE SIMULATED
#other <- predict(res, type = "distribution", newdata = new)
#other <- other[,4]
plot(ecdf(newdf1))
plot(ecdf(newdf), add = TRUE, col = 'r)
plot(ecdf(newdf), add = TRUE, col = 'r')
### EMPIRICAL CDF OF SEX 0 HERE SIMULATED
#other <- predict(res, type = "distribution", newdata = new)
#other <- other[,4]
plot(ecdf(newdf1))
plot(ecdf(newdf), add = TRUE, col = 'r')
### EMPIRICAL CDF OF SEX 0 HERE SIMULATED
#other <- predict(res, type = "distribution", newdata = new)
#other <- other[,4]
plot(ecdf(newdf1))
plot(ecdf(newdf), add = TRUE)
points(ecdf(newdf), add = TRUE)
### EMPIRICAL CDF OF SEX 0 HERE SIMULATED
#other <- predict(res, type = "distribution", newdata = new)
#other <- other[,4]
plot(ecdf(newdf1))
points(ecdf(newdf), add = TRUE)
points(ecdf(newdf))
### EMPIRICAL CDF OF SEX 0 HERE SIMULATED
#other <- predict(res, type = "distribution", newdata = new)
#other <- other[,4]
plot(ecdf(newdf1))
plot(ecdf(newdf))
### EMPIRICAL CDF OF SEX 0 HERE SIMULATED
#other <- predict(res, type = "distribution", newdata = new)
#other <- other[,4]
plot(ecdf(newdf1))
library(carData)
library(carData)
head(Mroz)
### EMPIRICAL CDF OF SEX 0 HERE SIMULATED
#other <- predict(res, type = "distribution", newdata = new)
#other <- other[,4]
plot(ecdf(newdf1))
### EMPIRICAL CDF OF SEX 0 HERE SIMULATED
#other <- predict(res, type = "distribution", newdata = new)
#other <- other[,4]
plot(ecdf(newdf1))
lines(ecdf(newdf))
points(ecdf(newdf))
### EMPIRICAL CDF OF SEX 0 HERE SIMULATED
#other <- predict(res, type = "distribution", newdata = new)
#other <- other[,4]
plot(ecdf(newdf1))
points(ecdf(newdf), add = TRUE)
plot(ecdf(newdf))
library(carData)
head(Mroz)
mroz.glm.mod<-glm(lfp ~. , family=binomial(link = "logit"), data= Mroz)
su<-summary(mroz.glm.mod)
exp(su$coefficients[4,1])
confint(mroz.glm.mod)
library(tram)
Lehmann_data
### EMPIRICAL CDF OF SEX 0 HERE SIMULATED
#other <- predict(res, type = "distribution", newdata = new)
#other <- other[,4]
plot(ecdf(newdf1))
dat<-data.frame(newdf,newdf1)
ggplot(data=dat, aes(x=newdf), geom="distribution") +
# stat_function(fun=pgumbel)+
stat_ecdf(aes(newdf),geom = "step")+
ggtitle(label = "Ecdf for males and females")+
xlab(label = "bmi value")+
ylab(label = "probability")+
theme_classic()
ggplot(data=dat, aes(x=newdf), geom="distribution") +
# stat_function(fun=pgumbel)+
stat_ecdf(aes(newdf),geom = "step")+
stat_ecdf(aes(newdf1),geom = "step")+
ggtitle(label = "Ecdf for males and females")+
xlab(label = "bmi value")+
ylab(label = "probability")+
theme_classic()
ggplot(data=dat, aes(x=newdf), geom="distribution") +
# stat_function(fun=pgumbel)+
stat_ecdf(aes(newdf),geom = "step")+
stat_ecdf(aes(newdf1),geom = "step", color = 0)+
ggtitle(label = "Ecdf for males and females")+
xlab(label = "bmi value")+
ylab(label = "probability")+
theme_classic()
ggplot(data=dat, aes(x=newdf), geom="distribution") +
# stat_function(fun=pgumbel)+
stat_ecdf(aes(newdf),geom = "step")+
stat_ecdf(aes(newdf1),geom = "step", color = "red")+
ggtitle(label = "Ecdf for males and females")+
xlab(label = "bmi value")+
ylab(label = "probability")+
theme_classic()
